#
# Makefile for dlibs
#
# 180590 Jan Bolt
#

.XARG:

CC      = cc
CFLAGS  = -c -O -DFLOATS=0 # FLOATS=1 for libm
AS      = jas
ASFLAGS =
AR      = ar

.c.o:
	$(CC) $(CFLAGS) $<

.s.o:
	$(AS) $(ASFLAGS) $<

OBJECTS = \
main.o \
initargs.o \
shell.o \
system.o \
exec.o \
getopt.o \
fopenp.o \
pfindfil.o \
findfile.o \
tmpnam.o \
putenv.o \
getenv.o \
getpid.o \
catch.o \
wildcard.o \
getcwd.o \
fullpath.o \
fopen.o \
fdopen.o \
isatty.o \
fclose.o \
fsetpos.o \
fseek.o \
open.o \
dup.o \
stat.o \
chmod.o \
abort.o \
stime.o \
time.o \
fscanf.o \
sscanf.o \
perrorf.o \
splitpat.o \
fprintf.o \
sprintf.o \
perror.o \
gets.o \
fgets.o \
fputs.o \
getw.o \
setvbuf.o \
setbuf.o \
fflush.o \
fread.o \
fgetc.o \
tttty.o \
fwrite.o \
fputc.o \
getbuf.o \
cprintf.o \
cputs.o \
getch.o \
getln.o \
printf.o \
scanf.o \
prtfld.o \
ctlcnv.o \
ltoa.o \
atol.o \
strtol.o \
chdir.o \
mkdir.o \
rmdir.o \
remove.o \
rename.o \
lseek.o \
read.o \
write.o \
qsort.o \
hsort.o \
bsearch.o \
lsearch.o \
strtok.o \
strtrim.o \
strrpl.o \
strirpl.o \
stradj.o \
strstr.o \
stristr.o \
strdup.o \
substr.o \
strspn.o \
strcspn.o \
strpbrk.o \
strrpbrk.o \
strlen.o \
strcpy.o \
strncpy.o \
strpcpy.o \
strcat.o \
strncat.o \
strupr.o \
strlwr.o \
strrev.o \
strcmp.o \
strncmp.o \
stricmp.o \
strnicmp.o \
strpos.o \
strrpos.o \
strset.o \
strrchr.o \
strchr.o \
memchr.o \
memmove.o \
lmemmove.o \
memccpy.o \
memset.o \
memcmp.o \
memicmp.o \
bzero.o \
ctype.o \
realloc.o \
memcpy.o \
lmemcpy.o \
memavail.o \
msize.o \
free.o \
malloc.o \
alloca.o \
brk.o \
timer.o \
rand.o \
swab.o \
creat.o \
crystal.o \
setjmp.o \
lmath.o \
blksiz.o \
stksiz.o

dlibs.a: $(OBJECTS)
	$(RM) dlibs.a
	$(AR) -q dlibs.a $(OBJECTS)

atol.o : stdio.h
atol.o : ctype.h
bsearch.o : stdio.h
catch.o : setjmp.h
chdir.o : stdio.h
chdir.o : errno.h
chmod.o : osbind.h
chmod.o : stdio.h
chmod.o : errno.h
cprintf.o : stdio.h
cputs.o : stdio.h
creat.o : osbind.h
creat.o : stdio.h
creat.o : stat.h
creat.o : errno.h
ctlcnv.o : stdio.h
ctype.o : stdio.h
ctype.o : ctype.h
dup.o : stdio.h
dup.o : osbind.h
dup.o : errno.h
exec.o : stdio.h
exec.o : osbind.h
exec.o : string.h
exec.o : basepage.h
exec.o : malloc.h
exec.o : errno.h
fclose.o : osbind.h
fclose.o : stdio.h
fdopen.o : stdio.h
fdopen.o : fcntl.h
fflush.o : stdio.h
fgetc.o : stdio.h
fgets.o : stdio.h
findfile.o : osbind.h
findfile.o : stdio.h
findfile.o : stat.h
fopen.o : stdio.h
fopen.o : fcntl.h
fopen.o : malloc.h
fopen.o : errno.h
fopenp.o : stdio.h
fopenp.o : string.h
fprintf.o : stdio.h
fprintf.o : stdarg.h
fputc.o : stdio.h
fputs.o : stdio.h
fread.o : osbind.h
fread.o : stdio.h
fread.o : errno.h
free.o : osbind.h
free.o : stdio.h
fscanf.o : stdio.h
fseek.o : osbind.h
fseek.o : stdio.h
fseek.o : errno.h
fsetpos.o : stdio.h
fullpath.o : stdio.h
fullpath.o : osbind.h
fullpath.o : limits.h
fullpath.o : string.h
fwrite.o : osbind.h
fwrite.o : stdio.h
fwrite.o : errno.h
getbuf.o : stdio.h
getbuf.o : malloc.h
getch.o : osbind.h
getch.o : stdio.h
getcwd.o : stdio.h
getcwd.o : limits.h
getcwd.o : malloc.h
getenv.o : stdio.h
getopt.o : stdio.h
getopt.o : string.h
gets.o : stdio.h
getw.o : stdio.h
initargs.o : stdio.h
initargs.o : osbind.h
initargs.o : string.h
initargs.o : basepage.h
initargs.o : errno.h
isatty.o : stdio.h
isatty.o : osbind.h
lsearch.o : stddef.h
lseek.o : stdio.h
lseek.o : errno.h
main.o : osbind.h
main.o : stdio.h
main.o : basepage.h
malloc.o : osbind.h
malloc.o : stddef.h
malloc.o : malloc.h
memavail.o : osbind.h
memavail.o : stddef.h
memccpy.o : stddef.h
memchr.o : stddef.h
mkdir.o : errno.h
open.o : osbind.h
open.o : stdio.h
open.o : fcntl.h
open.o : errno.h
perror.o : stdio.h
perror.o : errno.h
perrorf.o : stdio.h
perrorf.o : errno.h
perrorf.o : stdarg.h
pfindfil.o : stddef.h
pfindfil.o : limits.h
printf.o : stdio.h
printf.o : ctype.h
putenv.o : stdio.h
putenv.o : basepage.h
qsort.o : stddef.h
rand.o : osbind.h
rand.o : stdio.h
read.o : errno.h
realloc.o : stddef.h
realloc.o : malloc.h
remove.o : errno.h
rename.o : errno.h
rmdir.o : errno.h
scanf.o : stdio.h
scanf.o : ctype.h
setbuf.o : stdio.h
setvbuf.o : stdio.h
shell.o : osbind.h
shell.o : stdio.h
splitpat.o : stddef.h
splitpat.o : string.h
sprintf.o : stdarg.h
sscanf.o : stdio.h
stat.o : osbind.h
stat.o : stdio.h
stat.o : types.h
stat.o : stat.h
stat.o : errno.h
stime.o : time.h
stime.o : errno.h
stristr.o : stddef.h
strlwr.o : ctype.h
strpbrk.o : stddef.h
strrpbrk.o : stddef.h
strtok.o : stddef.h
strtol.o : stdio.h
strtol.o : string.h
strtol.o : ctype.h
strupr.o : ctype.h
system.o : osbind.h
system.o : stdio.h
system.o : errno.h
system.o : malloc.h
system.o : string.h
system.o : basepage.h
time.o : stdio.h
time.o : time.h
timer.o : time.h
tmpnam.o : stdio.h
tmpnam.o : string.h
tttty.o : stdio.h
tttty.o : osbind.h
tttty.o : errno.h
wildcard.o : stdio.h
wildcard.o : osbind.h
wildcard.o : string.h
wildcard.o : stat.h
wildcard.o : limits.h
write.o : errno.h
abort.o : stdio.h

dstart:
	$(AS) $(ASFLAGS) dstart.s

clean:
	$(RM) $(OBJECTS)

clobber:
	$(RM) $(OBJECTS) dlibs.a

